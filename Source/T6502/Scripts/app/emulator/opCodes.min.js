var Emulator;(function(n){var i=[],t=function(){function n(){}return n.computeBranch=function(n,t){return t>Constants.Memory.BranchBack?n-(Constants.Memory.BranchOffset-t):n+t},n.LoadOpCodesByName=function(n){for(var u=[],r,t=0;t<i.length;t++)r=new i[t],r.opName===n&&u.push(r);return u},n.ToByte=function(n){var t=n.toString(16).toUpperCase();return t.length==1?"0"+t:t},n.ToWord=function(n){var t=n.toString(16).toUpperCase();return t.length===4?t:["000","00","0"][t.length-1]+t},n.ToDecompiledLine=function(n,t,i){return"$"+n+": "+t+" "+i},n.FillOps=function(n){for(var t,u=Constants.Memory.ByteMask+1,f,r;u-=1;)f=new h(u),n.push(f);for(t=0;t<i.length;t++)r=new i[t],n[r.opCode]=r},n.ModeImmediate=1,n.ModeZeroPage=2,n.ModeZeroPageX=3,n.ModeZeroPageY=4,n.ModeAbsolute=5,n.ModeAbsoluteX=6,n.ModeAbsoluteY=7,n.ModeIndirect=8,n.ModeIndexedIndirectX=9,n.ModeIndexedIndirectY=10,n.ModeSingle=11,n.ModeRelative=12,n}(),r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st;n.OpCodes=t,r=function(){function n(){this.opName="BNE",this.sizeBytes=2,this.addressingMode=t.ModeRelative,this.opCode=208}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"$"+t.ToWord(t.computeBranch(n+2,i[1])))},n.prototype.execute=function(n){var i=n.addrPop();(n.rP&Constants.ProcessorStatus.ZeroFlagSet)==0&&(n.rPC=t.computeBranch(n.rPC,i))},n}(),n.BranchNotEqual=r,i.push(r),u=function(){function n(){this.opName="CPX",this.sizeBytes=2,this.addressingMode=t.ModeImmediate,this.opCode=224}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"#$"+t.ToByte(i[1]))},n.prototype.execute=function(n){n.compareWithFlags(n.rX,n.addrPop())},n}(),n.CompareXImmediate=u,i.push(u),f=function(){function n(){this.opName="CPY",this.sizeBytes=2,this.addressingMode=t.ModeImmediate,this.opCode=192}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"#$"+t.ToByte(i[1]))},n.prototype.execute=function(n){n.compareWithFlags(n.rY,n.addrPop())},n}(),n.CompareYImmediate=f,i.push(f),e=function(){function n(){this.opName="DEX",this.sizeBytes=1,this.addressingMode=t.ModeSingle,this.opCode=202}return n.prototype.decompile=function(n){return t.ToDecompiledLine(t.ToWord(n),this.opName,"")},n.prototype.execute=function(n){n.rX-=1,n.rX<0&&(n.rX=Constants.Memory.ByteMask),n.setFlags(n.rX)},n}(),n.DecXSingle=e,i.push(e),o=function(){function n(){this.opName="DEY",this.sizeBytes=1,this.addressingMode=t.ModeSingle,this.opCode=136}return n.prototype.decompile=function(n){return t.ToDecompiledLine(t.ToWord(n),this.opName,"")},n.prototype.execute=function(n){n.rY-=1,n.rY<0&&(n.rY=Constants.Memory.ByteMask),n.setFlags(n.rY)},n}(),n.DecYSingle=o,i.push(o),s=function(){function n(){this.opName="EOR",this.sizeBytes=2,this.addressingMode=t.ModeIndexedIndirectX,this.opCode=65}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"($"+t.ToByte(i[1])+", X)")},n.prototype.execute=function(n){var t=n.addrPop()+n.rX&Constants.Memory.ByteMask,i=n.peek(t)+(n.peek(t+1)<<Constants.Memory.BitsInByte);n.rA^=n.peek(i),n.setFlags(n.rA)},n}(),n.ExclusiveOrIndirectX=s,i.push(s),h=function(){function n(n){this.opName="???",this.sizeBytes=1,this.addressingMode=t.ModeSingle,this.opCode=n&Constants.Memory.ByteMask}return n.prototype.decompile=function(n){return t.ToDecompiledLine(t.ToWord(n),this.opName,"")},n.prototype.execute=function(n){var t=n.rPC-1,i=n.peek(t);throw"Invalid op code 0x"+i.toString(16).toUpperCase()+" encountered at $"+t.toString(16).toUpperCase();},n}(),n.InvalidOp=h,c=function(){function n(){this.opName="INC",this.sizeBytes=3,this.addressingMode=t.ModeAbsolute,this.opCode=238}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"$"+t.ToWord(i[1]+(i[2]<<Constants.Memory.BitsInByte)))},n.prototype.execute=function(n){var i=n.addrPopWord(),t=n.peek(i);t=t+1&Constants.Memory.ByteMask,n.poke(i,t),n.setFlags(t)},n}(),n.IncAbsolute=c,i.push(c),l=function(){function n(){this.opName="INC",this.sizeBytes=3,this.addressingMode=t.ModeAbsoluteX,this.opCode=254}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"$"+t.ToWord(i[1]+(i[2]<<Constants.Memory.BitsInByte))+", X")},n.prototype.execute=function(n){var i=n.addrPopWord()+n.rX,t=n.peek(i);t=t+1&Constants.Memory.ByteMask,n.poke(i,t),n.setFlags(t)},n}(),n.IncAbsoluteX=l,i.push(l),a=function(){function n(){this.opName="INX",this.sizeBytes=1,this.addressingMode=t.ModeSingle,this.opCode=232}return n.prototype.decompile=function(n){return t.ToDecompiledLine(t.ToWord(n),this.opName,"")},n.prototype.execute=function(n){n.rX=n.rX+1&Constants.Memory.ByteMask,n.setFlags(n.rX)},n}(),n.IncXSingle=a,i.push(a),v=function(){function n(){this.opName="INY",this.sizeBytes=1,this.addressingMode=t.ModeSingle,this.opCode=200}return n.prototype.decompile=function(n){return t.ToDecompiledLine(t.ToWord(n),this.opName,"")},n.prototype.execute=function(n){n.rY=n.rY+1&Constants.Memory.ByteMask,n.setFlags(n.rY)},n}(),n.IncYSingle=v,i.push(v),y=function(){function n(){this.opName="INC",this.sizeBytes=2,this.addressingMode=t.ModeZeroPage,this.opCode=230}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"$"+t.ToByte(i[1]))},n.prototype.execute=function(n){var i=n.addrPop(),t=n.peek(i);t=t+1&Constants.Memory.ByteMask,n.poke(i,t),n.setFlags(t)},n}(),n.IncZeroPage=y,i.push(y),p=function(){function n(){this.opName="INX",this.sizeBytes=1,this.addressingMode=t.ModeSingle,this.opCode=232}return n.prototype.decompile=function(n){return t.ToDecompiledLine(t.ToWord(n),this.opName,"")},n.prototype.execute=function(n){n.rX=n.rX+1&Constants.Memory.ByteMask,n.setFlags(n.rX)},n}(),n.IncrementX=p,i.push(p),w=function(){function n(){this.opName="JMP",this.sizeBytes=3,this.addressingMode=t.ModeAbsolute,this.opCode=76}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"$"+t.ToWord(i[1]+(i[2]<<Constants.Memory.BitsInByte)))},n.prototype.execute=function(n){var t=n.addrPopWord();n.rPC=t},n}(),n.JmpAbsolute=w,i.push(w),b=function(){function n(){this.opName="LDA",this.sizeBytes=2,this.addressingMode=t.ModeImmediate,this.opCode=169}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"#$"+t.ToByte(i[1]))},n.prototype.execute=function(n){n.rA=n.addrPop(),n.setFlags(n.rA)},n}(),n.LoadAccumulatorImmediate=b,i.push(b),k=function(){function n(){this.opName="LDY",this.sizeBytes=2,this.addressingMode=t.ModeImmediate,this.opCode=160}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"#$"+t.ToByte(i[1]))},n.prototype.execute=function(n){n.rY=n.addrPop(),n.setFlags(n.rY)},n}(),n.LoadYRegisterImmediate=k,i.push(k),d=function(){function n(){this.opName="LDX",this.sizeBytes=2,this.addressingMode=t.ModeImmediate,this.opCode=162}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"#$"+t.ToByte(i[1]))},n.prototype.execute=function(n){n.rX=n.addrPop(),n.setFlags(n.rX)},n}(),n.LoadXRegisterImmediate=d,i.push(d),g=function(){function n(){this.opName="LDX",this.sizeBytes=2,this.addressingMode=t.ModeZeroPage,this.opCode=166}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"$"+t.ToByte(i[1]))},n.prototype.execute=function(n){var t=n.addrPop();n.rX=n.peek(t),n.setFlags(n.rX)},n}(),n.LoadXRegisterZeroPage=g,i.push(g),nt=function(){function n(){this.opName="RTS",this.sizeBytes=1,this.addressingMode=t.ModeSingle,this.opCode=96}return n.prototype.decompile=function(n){return t.ToDecompiledLine(t.ToWord(n),this.opName,"")},n.prototype.execute=function(n){n.stackRts()},n}(),n.RtsSingle=nt,i.push(nt),tt=function(){function n(){this.opName="STA",this.sizeBytes=3,this.addressingMode=t.ModeAbsolute,this.opCode=141}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"$"+t.ToWord(i[1]+(i[2]<<Constants.Memory.BitsInByte)))},n.prototype.execute=function(n){var t=n.addrPopWord();n.poke(t,n.rA)},n}(),n.StoreAccumulatorAbsolute=tt,i.push(tt),it=function(){function n(){this.opName="STA",this.sizeBytes=3,this.addressingMode=t.ModeAbsoluteY,this.opCode=153}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"$"+t.ToWord(i[1]+(i[2]<<Constants.Memory.BitsInByte))+", Y")},n.prototype.execute=function(n){var t=n.addrPopWord()+n.rY;n.poke(t,n.rA)},n}(),n.StoreAccumulatorAbsoluteY=it,i.push(it),rt=function(){function n(){this.opName="STA",this.sizeBytes=2,this.addressingMode=t.ModeIndexedIndirectY,this.opCode=145}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"($"+t.ToByte(i[1])+"), Y")},n.prototype.execute=function(n){var t=n.addrPop(),i=n.peek(t)+(n.peek(t+1)<<Constants.Memory.BitsInByte)+n.rY;n.poke(i,n.rA)},n}(),n.StoreAccumulatorIndirectY=rt,i.push(rt),ut=function(){function n(){this.opName="STA",this.sizeBytes=2,this.addressingMode=t.ModeZeroPage,this.opCode=133}return n.prototype.decompile=function(n,i){return t.ToDecompiledLine(t.ToWord(n),this.opName,"$"+t.ToByte(i[1]))},n.prototype.execute=function(n){var t=n.addrPop();n.poke(t,n.rA)},n}(),n.StoreAccumulatorZeroPage=ut,i.push(ut),ft=function(){function n(){this.opName="TAX",this.sizeBytes=1,this.addressingMode=t.ModeSingle,this.opCode=170}return n.prototype.decompile=function(n){return t.ToDecompiledLine(t.ToWord(n),this.opName,"")},n.prototype.execute=function(n){n.rX=n.rA,n.setFlags(n.rX)},n}(),n.TransferAccumulatorToXSingle=ft,i.push(ft),et=function(){function n(){this.opName="TAY",this.sizeBytes=1,this.addressingMode=t.ModeSingle,this.opCode=168}return n.prototype.decompile=function(n){return t.ToDecompiledLine(t.ToWord(n),this.opName,"")},n.prototype.execute=function(n){n.rY=n.rA,n.setFlags(n.rY)},n}(),n.TransferAccumulatorToYSingle=et,i.push(et),ot=function(){function n(){this.opName="TXA",this.sizeBytes=1,this.addressingMode=t.ModeSingle,this.opCode=138}return n.prototype.decompile=function(n){return t.ToDecompiledLine(t.ToWord(n),this.opName,"")},n.prototype.execute=function(n){n.rA=n.rX,n.setFlags(n.rA)},n}(),n.TransferXToAccumulatorSingle=ot,i.push(ot),st=function(){function n(){this.opName="TYA",this.sizeBytes=1,this.addressingMode=t.ModeSingle,this.opCode=152}return n.prototype.decompile=function(n){return t.ToDecompiledLine(t.ToWord(n),this.opName,"")},n.prototype.execute=function(n){n.rA=n.rY,n.setFlags(n.rA)},n}(),n.TransferYToAccumulatorSingle=st,i.push(st)})(Emulator||(Emulator={}))