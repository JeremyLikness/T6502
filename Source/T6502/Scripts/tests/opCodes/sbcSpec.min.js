var Tests;(function(){function n(n){return n?"set":"reset"}function t(t){return"given carry flag "+n(t.carryFlag)+" and accumulator with value of "+t.accumulator.toString(10)+" when SBC executed with value of "+t.immediate.toString(10)}function i(t){return"then should provide result of "+t.expectedResult.toString(10)+" with carry flag "+n(t.expectedCarry)+" and negative flag "+n(t.expectedNegative)+" and zero flag "+n(t.expectedZero)+" and negative flag "+n(t.expectedNegative)}var r=[{carryFlag:!0,accumulator:32,immediate:16,expectedResult:16,expectedCarry:!0,expectedOverflow:!1,expectedZero:!1,expectedNegative:!1},{carryFlag:!0,accumulator:32,immediate:32,expectedResult:0,expectedCarry:!0,expectedOverflow:!1,expectedZero:!0,expectedNegative:!1},{carryFlag:!0,accumulator:32,immediate:33,expectedResult:255,expectedCarry:!1,expectedOverflow:!1,expectedZero:!1,expectedNegative:!0},{carryFlag:!0,accumulator:32,immediate:129,expectedResult:159,expectedCarry:!1,expectedOverflow:!0,expectedZero:!1,expectedNegative:!0},{carryFlag:!0,accumulator:144,immediate:64,expectedResult:80,expectedCarry:!0,expectedOverflow:!0,expectedZero:!1,expectedNegative:!1},{carryFlag:!0,accumulator:144,immediate:144,expectedResult:0,expectedCarry:!0,expectedOverflow:!1,expectedZero:!0,expectedNegative:!1},{carryFlag:!0,accumulator:144,immediate:160,expectedResult:240,expectedCarry:!1,expectedOverflow:!1,expectedZero:!1,expectedNegative:!0},{carryFlag:!1,accumulator:32,immediate:16,expectedResult:15,expectedCarry:!0,expectedOverflow:!1,expectedZero:!1,expectedNegative:!1},{carryFlag:!1,accumulator:32,immediate:32,expectedResult:255,expectedCarry:!1,expectedOverflow:!1,expectedZero:!1,expectedNegative:!0},{carryFlag:!1,accumulator:32,immediate:33,expectedResult:254,expectedCarry:!1,expectedOverflow:!1,expectedZero:!1,expectedNegative:!0},{carryFlag:!1,accumulator:32,immediate:129,expectedResult:158,expectedCarry:!1,expectedOverflow:!0,expectedZero:!1,expectedNegative:!0},{carryFlag:!1,accumulator:144,immediate:64,expectedResult:79,expectedCarry:!0,expectedOverflow:!0,expectedZero:!1,expectedNegative:!1},{carryFlag:!1,accumulator:144,immediate:144,expectedResult:255,expectedCarry:!1,expectedOverflow:!1,expectedZero:!1,expectedNegative:!0},{carryFlag:!1,accumulator:144,immediate:160,expectedResult:239,expectedCarry:!1,expectedOverflow:!1,expectedZero:!1,expectedNegative:!0}],u=[{carryFlag:!0,accumulator:34,immediate:17,expectedResult:17,expectedCarry:!0,expectedOverflow:!1,expectedZero:!1,expectedNegative:!1},{carryFlag:!0,accumulator:34,immediate:34,expectedResult:0,expectedCarry:!0,expectedOverflow:!1,expectedZero:!0,expectedNegative:!1},{carryFlag:!0,accumulator:34,immediate:35,expectedResult:153,expectedCarry:!1,expectedOverflow:!1,expectedZero:!1,expectedNegative:!0},{carryFlag:!0,accumulator:34,immediate:130,expectedResult:64,expectedCarry:!1,expectedOverflow:!0,expectedZero:!1,expectedNegative:!1},{carryFlag:!0,accumulator:153,immediate:68,expectedResult:85,expectedCarry:!0,expectedOverflow:!0,expectedZero:!1,expectedNegative:!1},{carryFlag:!0,accumulator:153,immediate:153,expectedResult:0,expectedCarry:!0,expectedOverflow:!1,expectedZero:!0,expectedNegative:!1},{carryFlag:!0,accumulator:153,immediate:170,expectedResult:137,expectedCarry:!1,expectedOverflow:!1,expectedZero:!1,expectedNegative:!0},{carryFlag:!1,accumulator:34,immediate:17,expectedResult:16,expectedCarry:!0,expectedOverflow:!1,expectedZero:!1,expectedNegative:!1},{carryFlag:!1,accumulator:34,immediate:34,expectedResult:153,expectedCarry:!1,expectedOverflow:!1,expectedZero:!1,expectedNegative:!0},{carryFlag:!1,accumulator:34,immediate:35,expectedResult:152,expectedCarry:!1,expectedOverflow:!1,expectedZero:!1,expectedNegative:!0},{carryFlag:!1,accumulator:34,immediate:130,expectedResult:57,expectedCarry:!1,expectedOverflow:!0,expectedZero:!1,expectedNegative:!1},{carryFlag:!1,accumulator:153,immediate:68,expectedResult:84,expectedCarry:!0,expectedOverflow:!0,expectedZero:!1,expectedNegative:!1},{carryFlag:!1,accumulator:153,immediate:153,expectedResult:153,expectedCarry:!1,expectedOverflow:!1,expectedZero:!1,expectedNegative:!0},{carryFlag:!1,accumulator:153,immediate:170,expectedResult:136,expectedCarry:!1,expectedOverflow:!1,expectedZero:!1,expectedNegative:!0}];describe("SBC - Subtract with Carry",function(){var e,n,o,f;beforeEach(function(){module("app")}),beforeEach(function(){inject(function(t,i){e=t,o=i,n=e.getCpu()})}),describe("SBC Immediate",function(){beforeEach(function(){f=new Emulator.SubtractWithCarryImmediate,n.rP=0});var e;describe("given binary mode",function(){for(e=0;e<r.length;e++){var u=r[e];(function(r){describe(t(r),function(){beforeEach(function(){n.setFlag(Constants.ProcessorStatus.CarryFlagSet,r.carryFlag),n.rA=r.accumulator,n.poke(n.rPC,r.immediate),f.execute(n)}),it(i(r),function(){expect(n.rA).toBe(r.expectedResult),expect(n.checkFlag(Constants.ProcessorStatus.CarryFlagSet)).toBe(r.expectedCarry),expect(n.checkFlag(Constants.ProcessorStatus.NegativeFlagSet)).toBe(r.expectedNegative),expect(n.checkFlag(Constants.ProcessorStatus.OverflowFlagSet)).toBe(r.expectedOverflow),expect(n.checkFlag(Constants.ProcessorStatus.ZeroFlagSet)).toBe(r.expectedZero)})})})(u)}}),describe("given decimal mode",function(){for(e=0;e<u.length;e++){var r=u[e];(function(r){describe(t(r),function(){beforeEach(function(){n.setFlag(Constants.ProcessorStatus.DecimalFlagSet,!0),n.setFlag(Constants.ProcessorStatus.CarryFlagSet,r.carryFlag),n.rA=r.accumulator,n.poke(n.rPC,r.immediate),f.execute(n)}),it(i(r),function(){expect(n.rA).toBe(r.expectedResult),expect(n.checkFlag(Constants.ProcessorStatus.CarryFlagSet)).toBe(r.expectedCarry),expect(n.checkFlag(Constants.ProcessorStatus.NegativeFlagSet)).toBe(r.expectedNegative),expect(n.checkFlag(Constants.ProcessorStatus.OverflowFlagSet)).toBe(r.expectedOverflow),expect(n.checkFlag(Constants.ProcessorStatus.ZeroFlagSet)).toBe(r.expectedZero)})})})(r)}})})})})(Tests||(Tests={}))